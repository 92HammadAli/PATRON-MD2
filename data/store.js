const _0x3a6141=_0x13ce;(function(_0x38774e,_0x2e7a4e){const _0x29fca4=_0x13ce,_0x4b4d31=_0x38774e();while(!![]){try{const _0x47b9cd=parseInt(_0x29fca4(0x145))/0x1*(-parseInt(_0x29fca4(0x175))/0x2)+-parseInt(_0x29fca4(0x158))/0x3*(-parseInt(_0x29fca4(0x146))/0x4)+parseInt(_0x29fca4(0x157))/0x5+parseInt(_0x29fca4(0x166))/0x6*(parseInt(_0x29fca4(0x152))/0x7)+-parseInt(_0x29fca4(0x156))/0x8*(-parseInt(_0x29fca4(0x144))/0x9)+parseInt(_0x29fca4(0x16d))/0xa+-parseInt(_0x29fca4(0x14d))/0xb*(parseInt(_0x29fca4(0x17a))/0xc);if(_0x47b9cd===_0x2e7a4e)break;else _0x4b4d31['push'](_0x4b4d31['shift']());}catch(_0x585fbd){_0x4b4d31['push'](_0x4b4d31['shift']());}}}(_0x2d3b,0x3ef9f));function _0x2d3b(){const _0x2d4317=['creation','groupMetadata','size','exports','../lib/database','36684ZNjAps','contact.json','find','mkdir','parse','60ICNzva','findIndex','subject','map','participants','baileys-pro','join','1017SHPRix','11MZTbUt','4uraqLb','toISOString','isCommunityAnnounce','cwd','linkedParent','push','../messageStore','2375527fKnfei','joinApprovalMode','sender','metadata.json','_participants.json','395059zcRPPD','sequelize','admin','memberAddMode','27752EzSgeL','2238590cdawGh','1136241XfQBHV','subjectOwner','replace','name','count','all','length','key','readFile','desc','jid','fs/promises','subjectTime','timestamp','6enoTQo','isCommunity','participant','sort','utf8','message.json','message_count.json','2645990XHuhng','Timestamp','descId'];_0x2d3b=function(){return _0x2d4317;};return _0x2d3b();}function _0x13ce(_0x4f5a88,_0x32aaed){const _0x2d3b2d=_0x2d3b();return _0x13ce=function(_0x13ce20,_0x216785){_0x13ce20=_0x13ce20-0x13f;let _0x31084c=_0x2d3b2d[_0x13ce20];return _0x31084c;},_0x13ce(_0x4f5a88,_0x32aaed);}const {isJidBroadcast,isJidGroup,isJidNewsletter}=require(_0x3a6141(0x142)),fs=require(_0x3a6141(0x163)),path=require('path'),{DataTypes}=require(_0x3a6141(0x153)),{DATABASE}=require(_0x3a6141(0x174)),storeDir=path[_0x3a6141(0x143)](process[_0x3a6141(0x149)](),'store'),readJSON=async _0x4282d5=>{const _0x4fc1a1=_0x3a6141;try{const _0x36f2c8=path[_0x4fc1a1(0x143)](storeDir,_0x4282d5),_0x4091f7=await fs[_0x4fc1a1(0x160)](_0x36f2c8,_0x4fc1a1(0x16a));return JSON[_0x4fc1a1(0x179)](_0x4091f7);}catch{return[];}},writeJSON=async(_0x2091e3,_0x1ab72e)=>{const _0x53ee77=_0x3a6141,_0x4c3c5c=path[_0x53ee77(0x143)](storeDir,_0x2091e3);await fs[_0x53ee77(0x178)](storeDir,{'recursive':!![]}),await fs['writeFile'](_0x4c3c5c,JSON['stringify'](_0x1ab72e,null,0x2));},saveContact=async(_0x219d8d,_0x241a0f)=>{const _0x51e8a1=_0x3a6141;if(!_0x219d8d||!_0x241a0f||isJidGroup(_0x219d8d)||isJidBroadcast(_0x219d8d)||isJidNewsletter(_0x219d8d))return;const _0x28bfa1=await readJSON('contact.json'),_0x243636=_0x28bfa1[_0x51e8a1(0x17b)](_0x561dce=>_0x561dce[_0x51e8a1(0x162)]===_0x219d8d);_0x243636>-0x1?_0x28bfa1[_0x243636][_0x51e8a1(0x15b)]=_0x241a0f:_0x28bfa1['push']({'jid':_0x219d8d,'name':_0x241a0f}),await writeJSON(_0x51e8a1(0x176),_0x28bfa1);},getContacts=async()=>{try{const _0x10ab05=await readJSON('contact.json');return _0x10ab05;}catch(_0x220fc3){return[];}},getName=async _0x506e7f=>{const _0x20fc80=_0x3a6141,_0x4c72dd=await readJSON(_0x20fc80(0x176)),_0x100998=_0x4c72dd['find'](_0x9565a5=>_0x9565a5[_0x20fc80(0x162)]===_0x506e7f);return _0x100998?_0x100998['name']:_0x506e7f['split']('@')[0x0][_0x20fc80(0x15a)](/_/g,'\x20');},saveGroupMetadata=async(_0x332692,_0x4ece85)=>{const _0x13e1cd=_0x3a6141;if(!isJidGroup(_0x332692))return;const _0x47b3c8=await _0x4ece85[_0x13e1cd(0x171)](_0x332692),_0x444332={'jid':_0x47b3c8['id'],'subject':_0x47b3c8[_0x13e1cd(0x13f)],'subjectOwner':_0x47b3c8[_0x13e1cd(0x159)],'subjectTime':_0x47b3c8[_0x13e1cd(0x164)]?new Date(_0x47b3c8[_0x13e1cd(0x164)]*0x3e8)['toISOString']():null,'size':_0x47b3c8[_0x13e1cd(0x172)],'creation':_0x47b3c8[_0x13e1cd(0x170)]?new Date(_0x47b3c8['creation']*0x3e8)[_0x13e1cd(0x147)]():null,'owner':_0x47b3c8['owner'],'desc':_0x47b3c8[_0x13e1cd(0x161)],'descId':_0x47b3c8[_0x13e1cd(0x16f)],'linkedParent':_0x47b3c8[_0x13e1cd(0x14a)],'restrict':_0x47b3c8['restrict'],'announce':_0x47b3c8['announce'],'isCommunity':_0x47b3c8[_0x13e1cd(0x167)],'isCommunityAnnounce':_0x47b3c8[_0x13e1cd(0x148)],'joinApprovalMode':_0x47b3c8[_0x13e1cd(0x14e)],'memberAddMode':_0x47b3c8[_0x13e1cd(0x155)],'ephemeralDuration':_0x47b3c8['ephemeralDuration']},_0x2e238c=await readJSON(_0x13e1cd(0x150)),_0xa63a58=_0x2e238c[_0x13e1cd(0x17b)](_0x279250=>_0x279250['jid']===_0x332692);_0xa63a58>-0x1?_0x2e238c[_0xa63a58]=_0x444332:_0x2e238c[_0x13e1cd(0x14b)](_0x444332);await writeJSON(_0x13e1cd(0x150),_0x2e238c);const _0x4712f8=_0x47b3c8[_0x13e1cd(0x141)][_0x13e1cd(0x140)](_0x45ecab=>({'jid':_0x332692,'participantId':_0x45ecab['id'],'admin':_0x45ecab[_0x13e1cd(0x154)]}));await writeJSON(_0x332692+'_participants.json',_0x4712f8);},getGroupMetadata=async _0x39ce75=>{const _0x316aed=_0x3a6141;if(!isJidGroup(_0x39ce75))return null;const _0x4e4814=await readJSON(_0x316aed(0x150)),_0x14aece=_0x4e4814[_0x316aed(0x177)](_0x1d12c6=>_0x1d12c6['jid']===_0x39ce75);if(!_0x14aece)return null;const _0x4f58dc=await readJSON(_0x39ce75+_0x316aed(0x151));return{..._0x14aece,'participants':_0x4f58dc};},saveMessageCount=async _0x4911ba=>{const _0x31f96d=_0x3a6141;if(!_0x4911ba)return;const _0x478de8=_0x4911ba[_0x31f96d(0x15f)]['remoteJid'],_0x307406=_0x4911ba[_0x31f96d(0x15f)][_0x31f96d(0x168)]||_0x4911ba[_0x31f96d(0x14f)];if(!_0x478de8||!_0x307406||!isJidGroup(_0x478de8))return;const _0x9fd574=await readJSON(_0x31f96d(0x16c)),_0x18027c=_0x9fd574[_0x31f96d(0x17b)](_0x3207de=>_0x3207de['jid']===_0x478de8&&_0x3207de[_0x31f96d(0x14f)]===_0x307406);_0x18027c>-0x1?_0x9fd574[_0x18027c]['count']+=0x1:_0x9fd574[_0x31f96d(0x14b)]({'jid':_0x478de8,'sender':_0x307406,'count':0x1}),await writeJSON(_0x31f96d(0x16c),_0x9fd574);},getInactiveGroupMembers=async _0x37170b=>{if(!isJidGroup(_0x37170b))return[];const _0x48068a=await getGroupMetadata(_0x37170b);if(!_0x48068a)return[];const _0x5232d1=await readJSON('message_count.json'),_0x31ac03=_0x48068a['participants']['filter'](_0x3336f2=>{const _0x151192=_0x13ce,_0x1b4a08=_0x5232d1[_0x151192(0x177)](_0x923cc4=>_0x923cc4[_0x151192(0x162)]===_0x37170b&&_0x923cc4['sender']===_0x3336f2['id']);return!_0x1b4a08||_0x1b4a08['count']===0x0;});return _0x31ac03['map'](_0x58d7a3=>_0x58d7a3['id']);},getGroupMembersMessageCount=async _0x36687b=>{const _0x2e4bce=_0x3a6141;if(!isJidGroup(_0x36687b))return[];const _0x5b639e=await readJSON(_0x2e4bce(0x16c)),_0x5aef44=_0x5b639e['filter'](_0x4fb14c=>_0x4fb14c[_0x2e4bce(0x162)]===_0x36687b&&_0x4fb14c[_0x2e4bce(0x15c)]>0x0)[_0x2e4bce(0x169)]((_0x110f3e,_0x32e24c)=>_0x32e24c[_0x2e4bce(0x15c)]-_0x110f3e[_0x2e4bce(0x15c)]);return Promise[_0x2e4bce(0x15d)](_0x5aef44[_0x2e4bce(0x140)](async _0x178a75=>({'sender':_0x178a75[_0x2e4bce(0x14f)],'name':await getName(_0x178a75[_0x2e4bce(0x14f)]),'messageCount':_0x178a75[_0x2e4bce(0x15c)]})));},getChatSummary=async()=>{const _0x16cab2=_0x3a6141,_0xca0d4a=await readJSON(_0x16cab2(0x16b)),_0x1b5f3e=[...new Set(_0xca0d4a[_0x16cab2(0x140)](_0x3a1912=>_0x3a1912['jid']))],_0x3fa5b9=await Promise['all'](_0x1b5f3e[_0x16cab2(0x140)](async _0x22101f=>{const _0x134248=_0x16cab2,_0x5e99ed=_0xca0d4a['filter'](_0x122b75=>_0x122b75[_0x134248(0x162)]===_0x22101f),_0x24da42=_0x5e99ed[_0x134248(0x15e)],_0x56c851=_0x5e99ed[_0x134248(0x169)]((_0x2bc5c3,_0x25ebcb)=>new Date(_0x25ebcb[_0x134248(0x165)])-new Date(_0x2bc5c3['timestamp']))[0x0],_0x11b7d2=isJidGroup(_0x22101f)?_0x22101f:await getName(_0x22101f);return{'jid':_0x22101f,'name':_0x11b7d2,'messageCount':_0x24da42,'Timestamp':_0x56c851?_0x56c851['timestamp']:null};}));return _0x3fa5b9[_0x16cab2(0x169)]((_0x1f031a,_0x8b4dee)=>new Date(_0x8b4dee[_0x16cab2(0x16e)])-new Date(_0x1f031a['Timestamp']));},{saveMessage,getMessage}=require(_0x3a6141(0x14c));module[_0x3a6141(0x173)]={'saveContact':saveContact,'getName':getName,'getChatSummary':getChatSummary,'saveGroupMetadata':saveGroupMetadata,'getGroupMetadata':getGroupMetadata,'saveMessageCount':saveMessageCount,'getInactiveGroupMembers':getInactiveGroupMembers,'getGroupMembersMessageCount':getGroupMembersMessageCount,'saveMessage':saveMessage,'getMessage':getMessage};